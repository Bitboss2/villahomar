<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villa HoMar - Guide de la Maison</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- PDF Generation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* --- Base & Dark Mode Variables --- */
        :root {
            --bg-color: #0a0a0a;
            --card-bg-color: rgba(31, 41, 55, 0.5);
            --border-color: rgba(75, 85, 99, 0.5);
            --primary-color: #34d399;
            --primary-hover-color: #059669;
            --text-color: #e5e7eb;
            --text-muted-color: #9ca3af;
            --text-strong-color: #ffffff;
            --header-bg: linear-gradient(135deg, rgba(17, 24, 39, 0.8) 0%, rgba(0,0,0,0.9) 100%), url('https://placehold.co/1920x1080/0a0a0a/1f2937?text=Villa+HoMar') no-repeat center center/cover;
            --footer-border-color: #1f2937; /* Corresponds to gray-800 */
            
            /* Colored text */
            --cyan-text: #22d3ee;
            --amber-text: #f59e0b;
            --red-text: #ef4444;
            --blue-link-text: #5c97f7;
        }

        /* --- Light Mode Variables --- */
        html.light {
            --bg-color: #f3f4f6;
            --card-bg-color: #ffffff;
            --border-color: #e5e7eb;
            --primary-color: #10b981;
            --primary-hover-color: #047857;
            --text-color: #1f2937;
            --text-muted-color: #6b7280;
            --text-strong-color: #000000;
            --header-bg: linear-gradient(135deg, rgba(229, 231, 235, 0.8) 0%, rgba(209, 213, 219, 0.9) 100%), url('https://placehold.co/1920x1080/f3f4f6/e5e7eb?text=Villa+HoMar') no-repeat center center/cover;
            --footer-border-color: #e5e7eb; /* Corresponds to gray-200 */

            /* Darker colored text for light mode */
            --cyan-text: #0891b2;
            --amber-text: #b45309;
            --red-text: #b91c1c;
            --blue-link-text: #2563eb;
        }

        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .main-header {
            background: var(--header-bg);
            background-attachment: fixed;
            /* Increased padding for better spacing from pill */
            padding-top: 10rem;
            padding-bottom: 8rem;
        }
        .card {
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .card:hover {
            border-color: rgba(52, 211, 153, 0.7);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        .icon { color: var(--primary-color); }
        .btn-primary {
            background-color: var(--primary-color);
            color: #000;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover { background-color: var(--primary-hover-color); }
        .btn-secondary {
            background-color: var(--card-bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover { border-color: var(--primary-color); }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding-top 0.5s ease-in-out;
            padding-top: 0;
        }
        .accordion-button .accordion-arrow { transition: transform 0.3s ease; }
        .accordion-button.open .accordion-arrow { transform: rotate(180deg); }
        
        /* Custom color classes using variables */
        .text-cyan-accent { color: var(--cyan-text); }
        .text-amber-accent { color: var(--amber-text); }
        .text-red-accent { color: var(--red-text); }
        .text-blue-link { color: var(--blue-link-text); }
        .text-strong { color: var(--text-strong-color); }
        .text-muted { color: var(--text-muted-color); }
        .footer-border { border-color: var(--footer-border-color); }
        
        /* Floating Action Pill Styles - COMPACT SIZE */
        .floating-pill {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 50;
            background: rgba(31, 41, 55, 0.85);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 9999px; /* Completely rounded */
            padding: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            /* COMPACT: Width fits content exactly */
            width: fit-content;
        }
        
        html.light .floating-pill {
            background: rgba(255, 255, 255, 0.85);
            border: 1px solid rgba(229, 231, 235, 0.5);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .floating-pill:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        html.light .floating-pill:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        /* PERFECT BUTTON DESIGN - All same size */
        .pill-button {
            background: transparent;
            border: none;
            color: var(--text-color);
            padding: 0.75rem;
            border-radius: 9999px; /* Completely rounded */
            transition: all 0.2s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px; /* Fixed width for consistency */
            height: 48px; /* Fixed height for consistency */
            flex-shrink: 0; /* Prevent shrinking */
        }
        
        .pill-button:hover {
            background: rgba(52, 211, 153, 0.2);
            transform: scale(1.05);
        }
        
        .pill-button.primary {
            background: var(--primary-color);
            color: #000;
            font-weight: 600;
            width: 96px; /* Exactly double the size of other buttons */
            padding: 0.75rem 1rem;
        }
        
        .pill-button.primary:hover {
            background: var(--primary-hover-color);
            transform: scale(1.02);
        }
        
        /* Language Dropdown Styles - ENHANCED FROSTED GLASS */
        .lang-dropdown { 
            position: relative; 
            display: inline-block; 
        }
        
        .lang-dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.75rem;
            background: rgba(31, 41, 55, 0.95); /* More opaque for better readability */
            backdrop-filter: blur(30px); /* Stronger blur */
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(75, 85, 99, 0.4);
            border-radius: 1.5rem; /* More rounded */
            min-width: 160px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4); /* Stronger shadow */
            z-index: 60;
            overflow: hidden;
            animation: fadeInDown 0.2s ease-out;
        }
        
        html.light .lang-dropdown-content {
            background: rgba(255, 255, 255, 0.95); /* More opaque for better readability */
            border: 1px solid rgba(229, 231, 235, 0.6);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .lang-dropdown-content.show {
            display: block;
        }
        
        .lang-dropdown-content a {
            color: var(--text-color);
            padding: 16px 20px;
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            font-weight: 500;
            min-height: 48px;
            background: rgba(0, 0, 0, 0.05); /* Subtle background for better contrast */
        }
        
        html.light .lang-dropdown-content a {
            background: rgba(0, 0, 0, 0.02);
        }
        
        .lang-dropdown-content a:hover { 
            background: rgba(52, 211, 153, 0.25);
            color: var(--text-strong-color);
        }
        
        .lang-dropdown-content a:not(:last-child) {
            border-bottom: 1px solid rgba(75, 85, 99, 0.2);
        }
        
        html.light .lang-dropdown-content a:not(:last-child) {
            border-bottom: 1px solid rgba(229, 231, 235, 0.3);
        }
        
        /* Mobile Responsive Adjustments */
        @media (max-width: 768px) {
            .floating-pill {
                top: 10px;
                right: 10px;
                left: 10px;
                justify-content: center;
                padding: 0.75rem;
                gap: 0.75rem;
                /* Mobile: Full width for better usability */
                width: auto;
            }
            
            .pill-button {
                width: 48px;
                height: 48px;
                padding: 0.75rem;
            }
            
            .pill-button.primary {
                width: 96px; /* Still double size on mobile */
                font-size: 0.9rem;
            }
            
            .lang-dropdown-content {
                right: 0;
                left: auto;
                min-width: 180px;
                margin-top: 1rem;
            }
            
            .lang-dropdown-content a {
                padding: 18px 24px;
                font-size: 1rem;
                min-height: 52px;
            }
            
            /* Adjust header padding for mobile */
            .main-header {
                padding-top: 7rem;
                padding-bottom: 6rem;
            }
        }
        
        /* Extra small screens */
        @media (max-width: 480px) {
            .floating-pill {
                padding: 0.5rem;
                gap: 0.5rem;
            }
            
            .pill-button {
                width: 44px;
                height: 44px;
                padding: 0.625rem;
            }
            
            .pill-button.primary {
                width: 88px;
                font-size: 0.875rem;
            }
            
            .main-header {
                padding-top: 6rem;
                padding-bottom: 5rem;
            }
        }
        
        /* Better title positioning - INCREASED SPACING */
        @media (min-width: 769px) {
            .main-header {
                padding-top: 12rem; /* Increased from 8rem to 12rem */
                padding-bottom: 10rem; /* Increased from 8rem to 10rem */
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Loading Overlay for PDF Generation -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-75 z-50 flex-col items-center justify-center hidden">
        <div class="loader mb-4"></div>
        <p class="text-white text-lg" data-lang-key="loading_pdf">G√©n√©ration du PDF en cours...</p>
    </div>

    <!-- Floating Action Pill -->
    <div class="floating-pill">
        <button id="generate-pdf-btn" class="pill-button primary flex items-center justify-center">
            <i class="ph-bold ph-download-simple mr-1"></i>
            <span data-lang-key="download_guide_btn" class="hidden sm:inline">PDF</span>
        </button>
        <button id="theme-toggle-btn" class="pill-button">
            <i id="theme-sun-icon" class="ph-bold ph-sun text-xl"></i>
            <i id="theme-moon-icon" class="ph-bold ph-moon text-xl"></i>
        </button>
        <!-- Language Switcher -->
        <div class="lang-dropdown">
            <button id="lang-toggle-btn" class="pill-button">
                <i class="ph-bold ph-translate text-xl"></i>
            </button>
            <div id="lang-dropdown-content" class="lang-dropdown-content">
                <a href="#" class="lang-switch" data-lang="fr">Fran√ßais üá´üá∑</a>
                <a href="#" class="lang-switch" data-lang="en">English üá¨üáß</a>
                <a href="#" class="lang-switch" data-lang="de">Deutsch üá©üá™</a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="main-header text-center">
        <div class="container mx-auto px-6">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-4 text-strong" data-lang-key="header_title">Bienvenue √† la Villa HoMar</h1>
            <p class="text-lg md:text-xl text-muted max-w-3xl mx-auto" data-lang-key="header_subtitle">Votre guide complet pour un s√©jour parfait. Retrouvez ici toutes les instructions et informations utiles.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="container mx-auto px-4 sm:px-6 py-12 md:py-16">

        <!-- Grid of instructions -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">

            <!-- Climatisation -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-snowflake icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="ac_title">Climatisation</h2>
                </div>
                <ul class="space-y-3 text-muted">
                    <li data-lang-key="ac_li_1"><i class="ph-fill ph-arrow-fat-lines-up-down inline-block mr-2 text-cyan-accent"></i>Utilisez les fl√®ches pour r√©gler la temp√©rature. La temp√©rature ambiante est en grand au centre, celle d√©sir√©e en petit en haut √† droite.</li>
                    <li data-lang-key="ac_li_2"><i class="ph-fill ph-blinds inline-block mr-2 text-cyan-accent"></i>Gardez les volets ferm√©s la journ√©e. La clim refroidira le salon si une chambre est chaude, d'o√π l'int√©r√™t de garder une temp√©rature homog√®ne.</li>
                    <li data-lang-key="ac_li_3"><i class="ph-fill ph-thermometer-cold inline-block mr-2 text-cyan-accent"></i>S'il fait trop froid, augmentez la temp√©rature d√©sir√©e plut√¥t que d'√©teindre.</li>
                    <li class="font-bold text-amber-accent" data-lang-key="ac_li_4"><i class="ph-fill ph-warning-circle inline-block mr-2"></i>Ne pas √©teindre les t√©l√©commandes signal√©es et ne pas toucher aux autres boutons.</li>
                </ul>
            </div>

            <!-- Alarme Piscine -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-swimming-pool icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="pool_alarm_title">Alarme Piscine</h2>
                </div>
                <ul class="space-y-3 text-muted">
                    <li><strong class="text-strong" data-lang-key="pool_alarm_li_1_strong">Activation :</strong> <span data-lang-key="pool_alarm_li_1_text">Code <span class="font-mono text-lg text-cyan-accent">1-2-3-4</span>. Attendre le clignotement vert lent quelques minutes.</span></li>
                    <li><strong class="text-strong" data-lang-key="pool_alarm_li_2_strong">D√©sactivation :</strong> <span data-lang-key="pool_alarm_li_2_text">appuyer sur le 2√®me bouton et composer <span class="font-mono text-lg text-cyan-accent">3-4-3-4-3-4</span>.</span></li>
                </ul>
            </div>

            <!-- Lave-vaisselle -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-plugs icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="dishwasher_title">Lave-vaisselle</h2>
                </div>
                <ol class="list-decimal list-inside space-y-2 text-muted">
                    <li data-lang-key="dishwasher_li_1">Mettre le produit/pastille directement dans la premi√®re trappe (celle de gauche) situ√©e dans la porte du lave-vaiselle</li>
                    <li data-lang-key="dishwasher_li_2">Fermer la porte, appuyer sur "On/OFF" √† gauche.</li>
                    <li data-lang-key="dishwasher_li_3">Choisir le programme √† l'aide de la fl√®che (je vous recommande le programme √† 65¬∞c)</li>
                    <li data-lang-key="dishwasher_li_4">Appuyer sur "Start" (√† droite).</li>
                    <li data-lang-key="dishwasher_li_5">√Ä la fin, appuyer sur "On/OFF" pour l'√©teindre.</li>
                    <li class="font-bold text-amber-accent" data-lang-key="dishwasher_li_6"><i class="ph-fill ph-warning-circle inline-block mr-2"></i>ouvrir minutieusement la porte du lave-vaiselle pour ne pas endommager la languette en plastique qui maintient la porte.</li>
                </ol>
            </div>

            <!-- Barbecue -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-fire icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="bbq_title">Barbecue</h2>
                </div>
                <p class="text-muted" data-lang-key="bbq_text">
                    <span class="font-bold text-red-accent">Ne jamais laisser le feu sans surveillance.</span> Risque d'incendie √©lev√© (cl√¥ture inflammable). Vider le barbecue (cendres froides) avant votre d√©part.
                </p>
                <img src="https://www.pompiersdulot.fr/sites/default/files/styles/image_300_300/public/2021-06/37104015351_f5bd0ec41a_o.jpg?itok=pz8Bz5P0" alt="Pr√©vention Feu" class="mt-4 rounded-2xl mx-auto w-32" onerror="this.onerror=null;this.src='https://placehold.co/128x128/ff0000/ffffff?text=Image+Feu';">
            </div>

            <!-- TV & Streaming -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-television-simple icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="tv_title">TV & Streaming</h2>
                </div>
                <p class="text-muted mb-2" data-lang-key="tv_p_1">Via l'app <span class="font-bold">aller sur Molotov TV</span> : allez sur "en direct" (en naviguant vers la gauche), choisissez une cha√Æne et appuyez <span class="font-bold">deux fois sur OK</span>.</p>
                <p class="text-muted" data-lang-key="tv_p_2">Pour vos abonnements (Netflix, etc.), touche "maisonnette", s√©lectionnez l'app et connectez-vous.</p>
                <p class="mt-3 font-bold text-amber-accent" data-lang-key="tv_p_3"><i class="ph-fill ph-warning-circle inline-block mr-2"></i>N'oubliez pas de vous d√©connecter de vos abonnements avant de partir !</p>
                <img src="https://i.ibb.co/pvyBXxR6/Capture-d-e-cran-2025-07-07-a-17-34-33.png" alt="QR Code pour le WiFi" class="mt-4 rounded-2xl bg-white p-2 mx-auto" onerror="this.style.display='none'">
                <img src="https://i.postimg.cc/PqbZ5gDn/Capture-d-e-cran-2025-07-07-a-17-44-05.png" alt="QR Code pour le WiFi" class="mt-4 rounded-2xl bg-white p-2 mx-auto" onerror="this.style.display='none'"> 
                <div class="flex justify-center items-center space-x-4 mt-4">
                </div>
            </div>

            <!-- Connexion WiFi -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-wifi-high icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="wifi_title">Connexion WiFi</h2>
                </div>
                <div class="space-y-2 text-muted">
                    <p><span data-lang-key="wifi_network">R√©seau:</span> <span class="font-semibold text-strong">villa-homar</span></p>
                    <p><span data-lang-key="wifi_password">Mot de passe:</span> <span class="font-semibold text-strong">Biscarrosse-40600.</span></p>
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=WIFI:T:WPA;S:villa-homar;P:Biscarrosse-40600.;;" alt="QR Code pour le WiFi" class="mt-4 rounded-2xl bg-white p-2 mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ffffff/000000?text=QR+Code';">
                    <p class="mt-2 font-bold text-red-accent" data-lang-key="wifi_warning">Ne jamais d√©brancher les box internet (indispensables pour la clim, l'arrosage, etc.).</p>
                </div>
            </div>

            <!-- Enceintes -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-speaker-high icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="speakers_title">Enceintes</h2>
                </div>
                <p class="text-muted" data-lang-key="speakers_text">Appuyer sur le bouton "Marche" des enceintes et du caisson de basse. S√©lectionner "FM" pour la radio. Ne pas oublier d'√©teindre apr√®s usage.</p>
            </div>

            <!-- Panneaux Solaires -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-solar-panel icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="solar_panels_title">Panneaux Solaires</h2>
                </div>
                <p class="text-muted" data-lang-key="solar_panels_text">Profitez de la journ√©e pour lancer lave-linge et lave-vaisselle. Quand l'ecran de consommation en temps r√©el indique <span class="font-mono text-lg text-cyan-accent">0</span>, l'√©nergie solaire prend le relais !</p>
            </div>

            <!-- Activit√©s -->
            <div class="card rounded-3xl p-6">
                <div class="flex items-center mb-4">
                    <i class="ph-bold ph-map-trifold icon text-4xl mr-4"></i>
                    <h2 class="text-2xl font-bold text-strong" data-lang-key="activities_title">Activit√©s</h2>
                </div>
                <p class="text-muted" data-lang-key="activities_text">Pour les activit√©s vous pouvez visiter le site de l'office de tourisme <a href="https://www.biscagrandslacs.com/agenda-des-manifestations" target="_blank" rel="noopener noreferrer" class="font-bold text-blue-link hover:underline">√† cette adresse</a>.</p>
            </div>

            <!-- Accordion Section -->
            <div class="md:col-span-2 lg:col-span-3 space-y-4">
                <!-- Infos Pratiques Accordion -->
                <div class="card rounded-3xl">
                    <button class="accordion-button w-full flex justify-between items-center p-6 text-left">
                        <div class="flex items-center">
                            <i class="ph-bold ph-info icon text-4xl mr-4"></i>
                            <h2 class="text-2xl font-bold text-strong" data-lang-key="practical_info_title">Infos Pratiques et Pr√©conisations</h2>
                        </div>
                        <i class="ph-bold ph-caret-down accordion-arrow text-3xl"></i>
                    </button>
                    <div class="accordion-content px-6 text-muted">
                        <div class="pb-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="font-bold text-lg text-strong mb-2" data-lang-key="bins_title">Poubelles</h3>
                                <p data-lang-key="bins_text_1">Sortir les containers le LUNDI et JEUDI matin.</p>
                                <p data-lang-key="bins_text_2">Point de tri (verre, carton, plastique) : √† 700m, rue Georges Pompidou.</p>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-strong mb-2" data-lang-key="markets_title">March√©s Locaux</h3>
                                <ul class="list-disc list-inside">
                                    <li data-lang-key="markets_li_1">Biscarrosse Ville : Vendredi matin & Dimanche matin.</li>
                                    <li data-lang-key="markets_li_2">Biscarrosse Plage : Tous les matins & march√©s nocturnes.</li>
                                    <li data-lang-key="markets_li_3">Parentis-en-Born : Jeudi matin.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-strong mb-2" data-lang-key="parking_title">Stationnement</h3>
                                <ul class="list-disc list-inside">
                                    <li data-lang-key="parking_li_1">Gratuit dans la ville (hors zones sp√©cifiques).</li>
                                    <li data-lang-key="parking_li_2">Payant : Abords du lac et plage des Viviers.</li>
                                    <li data-lang-key="parking_li_3">Zones bleues : 1h30 avec un disque ou noter l'heure d'arriv√©e sur un papier et posez-le visible sur votre tableau de bord.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-strong mb-2" data-lang-key="noise_title">Nuisances Sonores</h3>
                                <div class="list-disc list-inside">
                                    <p data-lang-key="noise_p_1"> Vous logez dans un quartier r√©sidentiel, tout comme chez vous voici les plages horaires √† respecter pour faire du "bruit" donc pensez √† √™tre plus discrets sur les autres plages horaires </p>
                                    <ul class="list-disc list-inside ml-4">
                                        <li data-lang-key="noise_li_1">Lun-Ven : 8h-12h et 14h-19h30</li>
                                        <li data-lang-key="noise_li_2">Samedi : 9h-12h et 15h-19h</li>
                                        <li data-lang-key="noise_li_3">Dimanche & f√©ri√©s : 10h-12h</li>
                                    </ul>
                                </div>
                            </div>
                             <div class="md:col-span-2">
                                <h3 class="font-bold text-lg text-strong mb-2" data-lang-key="pool_maintenance_title">Piscine & Entretien</h3>
                                <p data-lang-key="pool_maintenance_text">Pensez √† vous rincer les pieds avant de nager. S√©bastien s'occupe de la piscine tr√®s t√¥t tout les matins en toute discr√©tion, il a un bip pour entrer. Si l'eau devient trouble ou verte, contactez-le au <span class="font-semibold text-strong">06 68 02 64 83</span>.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Caution & D√©part Accordion -->
                <div class="card rounded-3xl">
                    <button class="accordion-button w-full flex justify-between items-center p-6 text-left">
                        <div class="flex items-center">
                            <i class="ph-bold ph-key icon text-4xl mr-4"></i>
                            <h2 class="text-2xl font-bold text-strong" data-lang-key="departure_title">D√©part & Caution</h2>
                        </div>
                        <i class="ph-bold ph-caret-down accordion-arrow text-3xl"></i>
                    </button>
                    <div class="accordion-content px-6 text-muted">
                        <div class="pb-6">
                            <p class="mb-4" data-lang-key="departure_p_1">Une caution m√©nage de 200‚Ç¨ a √©t√© transmise √† Elodie. Pour sa restitution int√©grale, merci de respecter la checklist suivante :</p>
                            <ul class="columns-1 sm:columns-2 list-disc list-inside space-y-2">
                                <li data-lang-key="departure_li_1">Literie et canap√© sans taches/odeur</li>
                                <li data-lang-key="departure_li_2">Aspirateur pass√©</li>
                                <li data-lang-key="departure_li_3">Sol lav√©</li>
                                <li data-lang-key="departure_li_4">Miroirs et vitres sans traces</li>
                                <li data-lang-key="departure_li_5">Appareils de cuisson propres</li>
                                <li data-lang-key="departure_li_6">Lave-vaisselle vid√© et propre</li>
                                <li data-lang-key="departure_li_7">Sanitaires et siphons propres</li>
                                <li data-lang-key="departure_li_8">Frigo et cong√©lateur propres</li>
                                <li data-lang-key="departure_li_9">Terrasse balay√©e (et lav√©e si besoin)</li>
                                <li data-lang-key="departure_li_10">Barbecue vid√© et nettoy√©</li>
                                <li data-lang-key="departure_li_11">Int√©rieur des meubles sans sable/cheveux</li>
                                <li data-lang-key="departure_li_12">Toutes les poubelles vid√©es</li>
                            </ul>
                            <p class="mt-4 text-amber-accent" data-lang-key="departure_p_2">En cas de perte de cl√©s ou de bip, un devis de remplacement sera transmis via la plateforme de r√©servation.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-8 mt-12 border-t footer-border">
        <p class="text-muted" data-lang-key="footer_text">Nous vous souhaitons un excellent s√©jour √† la Villa HoMar !</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- TRANSLATION LOGIC ---
        const translations = {
            fr: {
                loading_pdf: "G√©n√©ration du PDF en cours...",
                header_title: "Bienvenue √† la Villa HoMar",
                header_subtitle: "Votre guide complet pour un s√©jour parfait. Retrouvez ici toutes les instructions et informations utiles.",
                download_guide_btn: "PDF",
                ac_title: "Climatisation",
                ac_li_1: '<i class="ph-fill ph-arrow-fat-lines-up-down inline-block mr-2 text-cyan-accent"></i>Utilisez les fl√®ches pour r√©gler la temp√©rature. La temp√©rature ambiante est en grand au centre, celle d√©sir√©e en petit en haut √† droite.',
                ac_li_2: '<i class="ph-fill ph-blinds inline-block mr-2 text-cyan-accent"></i>Gardez les volets ferm√©s la journ√©e. La clim refroidira le salon si une chambre est chaude, d\'o√π l\'int√©r√™t de garder une temp√©rature homog√®ne.',
                ac_li_3: '<i class="ph-fill ph-thermometer-cold inline-block mr-2 text-cyan-accent"></i>S\'il fait trop froid, augmentez la temp√©rature d√©sir√©e plut√¥t que d\'√©teindre.',
                ac_li_4: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Ne pas √©teindre les t√©l√©commandes signal√©es et ne pas toucher aux autres boutons.',
                pool_alarm_title: "Alarme Piscine",
                pool_alarm_li_1_strong: "Activation :",
                pool_alarm_li_1_text: 'Code <span class="font-mono text-lg text-cyan-accent">1-2-3-4</span>. Attendre le clignotement vert lent quelques minutes.',
                pool_alarm_li_2_strong: "D√©sactivation :",
                pool_alarm_li_2_text: 'appuyer sur le 2√®me bouton et composer <span class="font-mono text-lg text-cyan-accent">3-4-3-4-3-4</span>.',
                dishwasher_title: "Lave-vaisselle",
                dishwasher_li_1: "Mettre le produit/pastille directement dans la premi√®re trappe (celle de gauche) situ√©e dans la porte du lave-vaiselle",
                dishwasher_li_2: 'Fermer la porte, appuyer sur "On/OFF" √† gauche.',
                dishwasher_li_3: "Choisir le programme √† l'aide de la fl√®che (je vous recommande le programme √† 65¬∞c)",
                dishwasher_li_4: 'Appuyer sur "Start" (√† droite).',
                dishwasher_li_5: '√Ä la fin, appuyer sur "On/OFF" pour l\'√©teindre.',
                dishwasher_li_6: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>ouvrir minutieusement la porte du lave-vaiselle pour ne pas endommager la languette en plastique qui maintient la porte.',
                bbq_title: "Barbecue",
                bbq_text: '<span class="font-bold text-red-accent">Ne jamais laisser le feu sans surveillance.</span> Risque d\'incendie √©lev√© (cl√¥ture inflammable). Vider le barbecue (cendres froides) avant votre d√©part.',
                tv_title: "TV & Streaming",
                tv_p_1: 'Via l\'app <span class="font-bold">aller sur Molotov TV</span> : allez sur "en direct" (en naviguant vers la gauche), choisissez une cha√Æne et appuyez <span class="font-bold">deux fois sur OK</span>.',
                tv_p_2: 'Pour vos abonnements (Netflix, etc.), touche "maisonnette", s√©lectionnez l\'app et connectez-vous.',
                tv_p_3: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>N\'oubliez pas de vous d√©connecter de vos abonnements avant de partir !',
                wifi_title: "Connexion WiFi",
                wifi_network: "R√©seau:",
                wifi_password: "Mot de passe:",
                wifi_warning: "Ne jamais d√©brancher les box internet (indispensables pour la clim, l'arrosage, etc.).",
                speakers_title: "Enceintes",
                speakers_text: 'Appuyer sur le bouton "Marche" des enceintes et du caisson de basse. S√©lectionner "FM" pour la radio. Ne pas oublier d\'√©teindre apr√®s usage.',
                solar_panels_title: "Panneaux Solaires",
                solar_panels_text: 'Profitez de la journ√©e pour lancer lave-linge et lave-vaisselle. Quand l\'ecran de consommation en temps r√©el indique <span class="font-mono text-lg text-cyan-accent">0</span>, l\'√©nergie solaire prend le relais !',
                activities_title: "Activit√©s",
                activities_text: 'Pour les activit√©s vous pouvez visiter le site de l\'office de tourisme <a href="https://www.biscagrandslacs.com/agenda-des-manifestations" target="_blank" rel="noopener noreferrer" class="font-bold text-blue-link hover:underline">√† cette adresse</a>.',
                practical_info_title: "Infos Pratiques et Pr√©conisations",
                bins_title: "Poubelles",
                bins_text_1: "Sortir les containers le LUNDI et JEUDI matin.",
                bins_text_2: "Point de tri (verre, carton, plastique) : √† 700m, rue Georges Pompidou.",
                markets_title: "March√©s Locaux",
                markets_li_1: "Biscarrosse Ville : Vendredi matin & Dimanche matin.",
                markets_li_2: "Biscarrosse Plage : Tous les matins & march√©s nocturnes.",
                markets_li_3: "Parentis-en-Born : Jeudi matin.",
                parking_title: "Stationnement",
                parking_li_1: "Gratuit dans la ville (hors zones sp√©cifiques).",
                parking_li_2: "Payant : Abords du lac et plage des Viviers.",
                parking_li_3: "Zones bleues : 1h30 avec un disque ou noter l'heure d'arriv√©e sur un papier et posez-le visible sur votre tableau de bord.",
                noise_title: "Nuisances Sonores",
                noise_p_1: "Vous logez dans un quartier r√©sidentiel, tout comme chez vous voici les plages horaires √† respecter pour faire du \"bruit\" donc pensez √† √™tre plus discrets sur les autres plages horaires",
                noise_li_1: "Lun-Ven : 8h-12h et 14h-19h30",
                noise_li_2: "Samedi : 9h-12h et 15h-19h",
                noise_li_3: "Dimanche & f√©ri√©s : 10h-12h",
                pool_maintenance_title: "Piscine & Entretien",
                pool_maintenance_text: 'Pensez √† vous rincer les pieds avant de nager. S√©bastien s\'occupe de la piscine tr√®s t√¥t tout les matins en toute discr√©tion, il a un bip pour entrer. Si l\'eau devient trouble ou verte, contactez-le au <span class="font-semibold text-strong">06 68 02 64 83</span>.',
                departure_title: "D√©part & Caution",
                departure_p_1: "Une caution m√©nage de 200‚Ç¨ a √©t√© transmise √† Elodie. Pour sa restitution int√©grale, merci de respecter la checklist suivante :",
                departure_li_1: "Literie et canap√© sans taches/odeur",
                departure_li_2: "Aspirateur pass√©",
                departure_li_3: "Sol lav√©",
                departure_li_4: "Miroirs et vitres sans traces",
                departure_li_5: "Appareils de cuisson propres",
                departure_li_6: "Lave-vaisselle vid√© et propre",
                departure_li_7: "Sanitaires et siphons propres",
                departure_li_8: "Frigo et cong√©lateur propres",
                departure_li_9: "Terrasse balay√©e (et lav√©e si besoin)",
                departure_li_10: "Barbecue vid√© et nettoy√©",
                departure_li_11: "Int√©rieur des meubles sans sable/cheveux",
                departure_li_12: "Toutes les poubelles vid√©es",
                departure_p_2: "En cas de perte de cl√©s ou de bip, un devis de remplacement sera transmis via la plateforme de r√©servation.",
                footer_text: "Nous vous souhaitons un excellent s√©jour √† la Villa HoMar !"
            },
            en: {
                loading_pdf: "Generating PDF...",
                header_title: "Welcome to Villa HoMar",
                header_subtitle: "Your complete rental guide for a perfect stay. Find all the essential instructions and information for your vacation rental here.",
                download_guide_btn: "PDF",
                ac_title: "Air Conditioning",
                ac_li_1: '<i class="ph-fill ph-arrow-fat-lines-up-down inline-block mr-2 text-cyan-accent"></i>Use the arrows to adjust temperature. Current room temperature is displayed large in the center, desired temperature small in the top right.',
                ac_li_2: '<i class="ph-fill ph-blinds inline-block mr-2 text-cyan-accent"></i>Keep shutters closed during the day. The AC will cool the living room if a bedroom gets hot, so maintaining consistent temperature throughout is important.',
                ac_li_3: '<i class="ph-fill ph-thermometer-cold inline-block mr-2 text-cyan-accent"></i>If too cold, increase the desired temperature rather than turning the system off.',
                ac_li_4: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Do not turn off the marked remote controls and avoid touching other buttons.',
                pool_alarm_title: "Pool Alarm",
                pool_alarm_li_1_strong: "To Activate:",
                pool_alarm_li_1_text: 'Enter code <span class="font-mono text-lg text-cyan-accent">1-2-3-4</span>. Wait for slow green flashing for a few minutes.',
                pool_alarm_li_2_strong: "To Deactivate:",
                pool_alarm_li_2_text: 'press the 2nd button and enter <span class="font-mono text-lg text-cyan-accent">3-4-3-4-3-4</span>.',
                dishwasher_title: "Dishwasher",
                dishwasher_li_1: "Place detergent tablet directly in the first compartment (left side) located in the dishwasher door",
                dishwasher_li_2: 'Close door, press "On/OFF" on the left.',
                dishwasher_li_3: "Select program using the arrow (we recommend the 65¬∞C program)",
                dishwasher_li_4: 'Press "Start" (on the right).',
                dishwasher_li_5: 'When finished, press "On/OFF" to turn off.',
                dishwasher_li_6: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Open the dishwasher door carefully to avoid damaging the plastic tab that holds the door.',
                bbq_title: "Barbecue",
                bbq_text: '<span class="font-bold text-red-accent">Never leave fire unattended.</span> High fire risk (flammable fencing). Empty barbecue (cold ashes) before departure.',
                tv_title: "TV & Streaming",
                tv_p_1: 'Using the <span class="font-bold">Molotov TV app</span>: go to "live TV" (navigate left), choose a channel and press <span class="font-bold">OK twice</span>.',
                tv_p_2: 'For your streaming subscriptions (Netflix, etc.), press the "home" button, select the app and log in.',
                tv_p_3: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Remember to log out of your streaming accounts before departure!',
                wifi_title: "WiFi Connection",
                wifi_network: "Network:",
                wifi_password: "Password:",
                wifi_warning: "Never unplug the internet boxes (essential for AC, irrigation system, etc.).",
                speakers_title: "Speakers",
                speakers_text: 'Press the "On" button on speakers and subwoofer. Select "FM" for radio. Remember to turn off after use.',
                solar_panels_title: "Solar Panels",
                solar_panels_text: 'Take advantage of daytime to run washing machine and dishwasher. When the real-time consumption display shows <span class="font-mono text-lg text-cyan-accent">0</span>, solar power takes over!',
                activities_title: "Activities",
                activities_text: 'For local activities, visit the tourist office website <a href="https://www.biscagrandslacs.com/agenda-des-manifestations" target="_blank" rel="noopener noreferrer" class="font-bold text-blue-link hover:underline">at this address</a>.',
                practical_info_title: "Practical Information & Guidelines",
                bins_title: "Trash Collection",
                bins_text_1: "Put containers out on MONDAY and THURSDAY mornings.",
                bins_text_2: "Recycling point (glass, cardboard, plastic): 700m away, rue Georges Pompidou.",
                markets_title: "Local Markets",
                markets_li_1: "Biscarrosse Town: Friday morning & Sunday morning.",
                markets_li_2: "Biscarrosse Beach: Every morning & evening markets.",
                markets_li_3: "Parentis-en-Born: Thursday morning.",
                parking_title: "Parking",
                parking_li_1: "Free in town (except specific zones).",
                parking_li_2: "Paid parking: Lake area and Viviers beach.",
                parking_li_3: "Blue zones: 1.5 hours with parking disc or write arrival time on paper and place visibly on dashboard.",
                noise_title: "Noise Guidelines",
                noise_p_1: "You're staying in a residential area. Like at home, here are the time slots for activities that may create noise - please be quieter during other hours:",
                noise_li_1: "Mon-Fri: 8am-12pm and 2pm-7:30pm",
                noise_li_2: "Saturday: 9am-12pm and 3pm-7pm",
                noise_li_3: "Sunday & holidays: 10am-12pm",
                pool_maintenance_title: "Pool & Maintenance",
                pool_maintenance_text: 'Please rinse your feet before swimming. S√©bastien maintains the pool very early each morning discreetly; he has access. If water becomes cloudy or green, contact him at <span class="font-semibold text-strong">06 68 02 64 83</span>.',
                departure_title: "Departure & Security Deposit",
                departure_p_1: "A ‚Ç¨200 cleaning deposit was given to Elodie. For full refund, please follow this checkout checklist:",
                departure_li_1: "Bedding and sofa without stains/odors",
                departure_li_2: "Floors vacuumed",
                departure_li_3: "Floors mopped",
                departure_li_4: "Mirrors and windows streak-free",
                departure_li_5: "Cooking appliances clean",
                departure_li_6: "Dishwasher emptied and clean",
                departure_li_7: "Bathrooms and drains clean",
                departure_li_8: "Refrigerator and freezer clean",
                departure_li_9: "Terrace swept (and mopped if needed)",
                departure_li_10: "Barbecue emptied and cleaned",
                departure_li_11: "Furniture interiors free of sand/hair",
                departure_li_12: "All trash bins emptied",
                departure_p_2: "If keys or access remote are lost, replacement costs will be charged through the booking platform.",
                footer_text: "We wish you an excellent stay at Villa HoMar!"
            },
            de: {
                loading_pdf: "PDF wird erstellt...",
                header_title: "Willkommen in der Villa HoMar",
                header_subtitle: "Ihr vollst√§ndiger Mietleitfaden f√ºr einen perfekten Aufenthalt. Hier finden Sie alle wichtigen Anweisungen und Informationen f√ºr Ihre Ferienwohnung.",
                download_guide_btn: "PDF",
                ac_title: "Klimaanlage",
                ac_li_1: '<i class="ph-fill ph-arrow-fat-lines-up-down inline-block mr-2 text-cyan-accent"></i>Verwenden Sie die Pfeile zur Temperatureinstellung. Aktuelle Raumtemperatur wird gro√ü in der Mitte angezeigt, gew√ºnschte Temperatur klein oben rechts.',
                ac_li_2: '<i class="ph-fill ph-blinds inline-block mr-2 text-cyan-accent"></i>Rolll√§den tags√ºber geschlossen halten. Die Klimaanlage k√ºhlt das Wohnzimmer wenn ein Schlafzimmer hei√ü wird, daher ist gleichm√§√üige Temperatur wichtig.',
                ac_li_3: '<i class="ph-fill ph-thermometer-cold inline-block mr-2 text-cyan-accent"></i>Bei zu kalter Temperatur die gew√ºnschte Temperatur erh√∂hen statt das System auszuschalten.',
                ac_li_4: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Markierte Fernbedienungen nicht ausschalten und andere Tasten nicht ber√ºhren.',
                pool_alarm_title: "Pool-Alarm",
                pool_alarm_li_1_strong: "Aktivierung:",
                pool_alarm_li_1_text: 'Code eingeben <span class="font-mono text-lg text-cyan-accent">1-2-3-4</span>. Einige Minuten auf langsames gr√ºnes Blinken warten.',
                pool_alarm_li_2_strong: "Deaktivierung:",
                pool_alarm_li_2_text: '2. Taste dr√ºcken und <span class="font-mono text-lg text-cyan-accent">3-4-3-4-3-4</span> eingeben.',
                dishwasher_title: "Geschirrsp√ºler",
                dishwasher_li_1: "Sp√ºlmittel-Tablette direkt in das erste Fach (links) in der Geschirrsp√ºlert√ºr geben",
                dishwasher_li_2: 'T√ºr schlie√üen, links "On/OFF" dr√ºcken.',
                dishwasher_li_3: "Programm mit Pfeil ausw√§hlen (wir empfehlen das 65¬∞C-Programm)",
                dishwasher_li_4: '"Start" dr√ºcken (rechts).',
                dishwasher_li_5: 'Nach Ende "On/OFF" zum Ausschalten dr√ºcken.',
                dishwasher_li_6: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Geschirrsp√ºlert√ºr vorsichtig √∂ffnen um die Plastiklasche nicht zu besch√§digen.',
                bbq_title: "Grill",
                bbq_text: '<span class="font-bold text-red-accent">Feuer niemals unbeaufsichtigt lassen.</span> Hohe Brandgefahr (brennbarer Zaun). Grill vor Abreise leeren (kalte Asche).',
                tv_title: "Fernseher & Streaming",
                tv_p_1: 'Mit der <span class="font-bold">Molotov TV App</span>: zu "Live TV" gehen (nach links navigieren), Sender w√§hlen und <span class="font-bold">zweimal OK</span> dr√ºcken.',
                tv_p_2: 'F√ºr Ihre Streaming-Abos (Netflix, etc.), "Home"-Taste dr√ºcken, App ausw√§hlen und anmelden.',
                tv_p_3: '<i class="ph-fill ph-warning-circle inline-block mr-2"></i>Vergessen Sie nicht, sich vor Abreise von Ihren Streaming-Konten abzumelden!',
                wifi_title: "WLAN-Verbindung",
                wifi_network: "Netzwerk:",
                wifi_password: "Passwort:",
                wifi_warning: "Internet-Boxen niemals ausstecken (wichtig f√ºr Klimaanlage, Bew√§sserung, etc.).",
                speakers_title: "Lautsprecher",
                speakers_text: '"Ein"-Taste an Lautsprechern und Subwoofer dr√ºcken. "FM" f√ºr Radio w√§hlen. Nach Gebrauch ausschalten nicht vergessen.',
                solar_panels_title: "Solarpanels",
                solar_panels_text: 'Nutzen Sie den Tag f√ºr Waschmaschine und Geschirrsp√ºler. Wenn die Echtzeit-Verbrauchsanzeige <span class="font-mono text-lg text-cyan-accent">0</span> zeigt, √ºbernimmt Solarstrom!',
                activities_title: "Aktivit√§ten",
                activities_text: 'F√ºr lokale Aktivit√§ten besuchen Sie die Tourismusb√ºro-Website <a href="https://www.biscagrandslacs.com/agenda-des-manifestations" target="_blank" rel="noopener noreferrer" class="font-bold text-blue-link hover:underline">unter dieser Adresse</a>.',
                practical_info_title: "Praktische Informationen & Richtlinien",
                bins_title: "M√ºllabholung",
                bins_text_1: "Container MONTAGS und DONNERSTAGS morgens rausstellen.",
                bins_text_2: "Wertstoffhof (Glas, Pappe, Plastik): 700m entfernt, rue Georges Pompidou.",
                markets_title: "Lokale M√§rkte",
                markets_li_1: "Biscarrosse Stadt: Freitagmorgen & Sonntagmorgen.",
                markets_li_2: "Biscarrosse Strand: Jeden Morgen & Abendm√§rkte.",
                markets_li_3: "Parentis-en-Born: Donnerstagmorgen.",
                parking_title: "Parken",
                parking_li_1: "Kostenlos in der Stadt (au√üer spezielle Zonen).",
                parking_li_2: "Geb√ºhrenpflichtig: Seebereich und Viviers Strand.",
                parking_li_3: "Blaue Zonen: 1,5 Stunden mit Parkscheibe oder Ankunftszeit auf Zettel schreiben und sichtbar aufs Armaturenbrett legen.",
                noise_title: "L√§rmrichtlinien",
                noise_p_1: "Sie wohnen in einem Wohngebiet. Wie zu Hause gibt es Zeiten f√ºr Aktivit√§ten die L√§rm verursachen k√∂nnen - bitte seien Sie zu anderen Zeiten leiser:",
                noise_li_1: "Mo-Fr: 8-12 Uhr und 14-19:30 Uhr",
                noise_li_2: "Samstag: 9-12 Uhr und 15-19 Uhr",
                noise_li_3: "Sonntag & Feiertage: 10-12 Uhr",
                pool_maintenance_title: "Pool & Wartung",
                pool_maintenance_text: 'Bitte F√º√üe vor dem Schwimmen absp√ºlen. S√©bastien pflegt den Pool jeden Morgen sehr fr√ºh und diskret; er hat Zugang. Bei tr√ºbem oder gr√ºnem Wasser kontaktieren Sie ihn unter <span class="font-semibold text-strong">06 68 02 64 83</span>.',
                departure_title: "Abreise & Kaution",
                departure_p_1: "Eine Reinigungskaution von 200‚Ç¨ wurde an Elodie √ºbergeben. F√ºr vollst√§ndige R√ºckerstattung befolgen Sie bitte diese Abreise-Checkliste:",
                departure_li_1: "Bettw√§sche und Sofa ohne Flecken/Ger√ºche",
                departure_li_2: "B√∂den gesaugt",
                departure_li_3: "B√∂den gewischt",
                departure_li_4: "Spiegel und Fenster streifenfrei",
                departure_li_5: "Kochger√§te sauber",
                departure_li_6: "Geschirrsp√ºler geleert und sauber",
                departure_li_7: "Badezimmer und Abfl√ºsse sauber",
                departure_li_8: "K√ºhlschrank und Gefrierschrank sauber",
                departure_li_9: "Terrasse gefegt (und gewischt falls n√∂tig)",
                departure_li_10: "Grill geleert und gereinigt",
                departure_li_11: "M√∂bel-Innenseiten frei von Sand/Haaren",
                departure_li_12: "Alle M√ºlleimer geleert",
                departure_p_2: "Bei Verlust von Schl√ºsseln oder Zugangsfernbedienung werden Ersatzkosten √ºber die Buchungsplattform berechnet.",
                footer_text: "Wir w√ºnschen Ihnen einen ausgezeichneten Aufenthalt in der Villa HoMar!"
            }
        };

        const setLanguage = (lang) => {
            document.documentElement.lang = lang;
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (translations[lang] && translations[lang][key]) {
                    element.innerHTML = translations[lang][key];
                }
            });
            localStorage.setItem('language', lang);
        };

        const languageSwitches = document.querySelectorAll('.lang-switch');
        languageSwitches.forEach(button => {
            button.addEventListener('click', (event) => {
                event.preventDefault();
                const lang = button.getAttribute('data-lang');
                setLanguage(lang);
                // Close dropdown after selection
                document.getElementById('lang-dropdown-content').classList.remove('show');
            });
        });

        // Improved Language Dropdown Logic
        const langToggleBtn = document.getElementById('lang-toggle-btn');
        const langDropdownContent = document.getElementById('lang-dropdown-content');

        langToggleBtn.addEventListener('click', (event) => {
            event.stopPropagation();
            langDropdownContent.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (event) => {
            if (!langToggleBtn.contains(event.target) && !langDropdownContent.contains(event.target)) {
                langDropdownContent.classList.remove('show');
            }
        });

        // Check for saved language in localStorage
        const savedLanguage = localStorage.getItem('language');
        if (savedLanguage && translations[savedLanguage]) {
            setLanguage(savedLanguage);
        } else {
            // Default to French if nothing is saved
            setLanguage('fr');
        }

        // --- THEME SWITCHER LOGIC ---
        const themeToggleButton = document.getElementById('theme-toggle-btn');
        const sunIcon = document.getElementById('theme-sun-icon');
        const moonIcon = document.getElementById('theme-moon-icon');
        const htmlElement = document.documentElement;

        const applyTheme = (theme) => {
            if (theme === 'light') {
                htmlElement.classList.add('light');
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                htmlElement.classList.remove('light');
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        };

        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme) {
            applyTheme(savedTheme);
        } else {
            applyTheme(prefersDark ? 'dark' : 'light');
        }

        themeToggleButton.addEventListener('click', () => {
            const currentTheme = htmlElement.classList.contains('light') ? 'light' : 'dark';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });

        // --- ACCORDION LOGIC ---
        document.querySelectorAll('.accordion-button').forEach(button => {
            button.addEventListener('click', () => {
                const accordionContent = button.nextElementSibling;
                button.classList.toggle('open');
                if (button.classList.contains('open')) {
                    accordionContent.style.maxHeight = accordionContent.scrollHeight + 'px';
                    accordionContent.style.paddingTop = '1rem';
                } else {
                    accordionContent.style.maxHeight = '0';
                    accordionContent.style.paddingTop = '0';
                }
            });
        });

        // --- PDF GENERATION LOGIC ---
        document.getElementById('generate-pdf-btn').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const content = document.getElementById('main-content');
            const loadingOverlay = document.getElementById('loading-overlay');
            const floatingPill = document.querySelector('.floating-pill');
            
            loadingOverlay.style.display = 'flex';
            floatingPill.style.visibility = 'hidden';

            const accordions = document.querySelectorAll('.accordion-button');
            const wereOpen = [];
            accordions.forEach((button, index) => {
                wereOpen[index] = button.classList.contains('open');
                if (!wereOpen[index]) {
                    button.click();
                }
            });

            setTimeout(() => {
                const isLightTheme = htmlElement.classList.contains('light');
                html2canvas(content, { 
                    scale: 2,
                    backgroundColor: isLightTheme ? '#f3f4f6' : '#0a0a0a',
                    useCORS: true 
                }).then(canvas => {
                    floatingPill.style.visibility = 'visible';
                    loadingOverlay.style.display = 'none';

                    accordions.forEach((button, index) => {
                        if (!wereOpen[index]) {
                           button.click();
                        }
                    });

                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const pdfHeight = pdf.internal.pageSize.getHeight();
                    const ratio = canvas.width / canvas.height;
                    const imgWidth = pdfWidth - 20;
                    const imgHeight = imgWidth / ratio;
                    
                    let heightLeft = imgHeight;
                    let position = 15;

                    pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                    heightLeft -= (pdfHeight - 25);

                    while (heightLeft > 0) {
                        position = -heightLeft - 15;
                        pdf.addPage();
                        pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                        heightLeft -= pdfHeight;
                    }
                    
                    pdf.save('Guide-Villa-HoMar.pdf');
                }).catch(err => {
                    loadingOverlay.style.display = 'none';
                    floatingPill.style.visibility = 'visible';
                    console.error("Erreur lors de la g√©n√©ration du PDF:", err);
                });
            }, 600); // Increased delay for accordion animation
        });
    });
    </script>

</body>
</html>

